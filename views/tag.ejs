<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= name %> (Tag) | Simple Counter</title>

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="/stylesheets/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="/scripts/materialize.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link href="/stylesheets/main.css" rel="stylesheet">
</head>

<body>
    <!-- Nav bar -->
    <header>
        <nav>
            <div class="nav-wrapper">
                <a href="/" class="brand-logo">Simple Counter</a>
                <a href="#" data-target="mobile-nav" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                <!-- Main nav, hidden for small screens -->
                <ul id="desktop-nav" class="right hide-on-med-and-down">
                    <li><a href="/"><i class="material-icons left">home</i>Home</a></li>
                    <li><a href="/list"><i class="material-icons left">list</i>List</a></li>
                    <% if (isLoggedIn) { %>
                        <li><a class="btn red" href="/logout"> <i class="material-icons left">logout</i> Logout</a></li>
                        <li><a href="/profile"><i class="material-icons left">person</i> <%=user.name %></a></li>
                    <% } else { %>
                        <li><a class="btn blue darken-2" href="/login"> <i class="material-icons left">login</i> Login</a></li>
                    <% } %>
                </ul>
            </div>
        </nav>
        <!-- Mobile nav menu, shown when menu button clicked -->
        <ul id="mobile-nav" class="sidenav">
            <li><a href="/"><i class="material-icons left">home</i>Home</a></li>
            <li><a href="/list"><i class="material-icons left">list</i>List</a></li>
            <% if (isLoggedIn) { %>
                <li><a class="btn red" href="/logout"> <i class="material-icons left">logout</i> Logout</a></li>
                <li><a href="/profile"><i class="material-icons left">person</i> <%=user.name %></a></li>
            <% } else { %>
                <li><a class="btn blue darken-2" href="/login"> <i class="material-icons left">login</i> Login</a></li>
            <% } %>
        </ul>
    </header>

    <div class="container">
        <h2>Tag detail: <%= name %></h2>
        <a class="btn blue" href="/list">Back to list <i class="material-icons left">arrow_back</i></a>
        <a class="btn green darken-2" href="/list">Filter by this tag <!-- TODO -->
            <i class="material-icons left">filter_list</i></a>
        <a class="btn red">Delete <i class="material-icons left">delete</i></a>
        <a class="btn waves-effect waves-light modal-trigger" id="rename-item" href="#edit">Rename/Edit
            <i class="material-icons right">edit</i></a>
        <table class="highlight" style="font-size:18px">
            <tbody>
                <tr>
                    <th>Description</th>
                    <td> <span style="line-height:36px"><%= description %></span>
                    </td>
                </tr>
                <tr>
                    <th># of items:</th>
                    <td><%= items.length %></td>
                </tr>
                <tr>
                    <th>Total:</th>
                    <td><%= total %></td>
                </tr>
            </tbody>
        </table>
        <h5>Items with this tag (sorted by count):</h5>
        <ul class="collection" style="font-size:18px">
            <% for (let i = 0; i < items.length; i++) { %>
            <li class="collection-item"><a href="/item/<%= items[i].id %>"><%= items[i].item %></a> <span
                    class="secondary-content black-text small-item-count right"><%= items[i].count %></span></li>
            <% } %>
        </ul>

        <div class="modal" id="edit">

            <div class="modal-content">

                <h2>Edit tag:</h2>
                <form>
                    <div class="row">
                        <div class="input-field col s12">
                            <label for="nameInput">Tag Name:</label>
                            <input value="animal" type="text" name="name" id="nameInput" class="validate"
                                data-length="32">
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <label for="descriptionInput">Tag Description:</label>
                            <textarea class="materialize-textarea"
                                id="descriptionInput"> This tag is for items that represent some type of animal. </textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn waves-effect waves-light" type="submit">
                            <i class="material-icons right">send</i>
                            Submit
                        </button>
                        <button class="modal-close waves-effect waves-green btn-flat">Cancel</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
    <script> M.AutoInit();</script>
</body>

</html>